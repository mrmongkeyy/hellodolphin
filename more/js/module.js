const get=function(t){return document.querySelector(t)},getall=function(t){return document.querySelectorAll(t)},createelement=function(t){return document.createElement(t)},returnhtmltemplate=function(t){return"\n\t\t<div class='rect'>\n\t\t\t<div class='articleimage'>\n\t\t\t\t<img src='"+t.prevlink+"' onerror=imgerr(this)>\n\t\t\t</div>\n\t\t\t<div class='articletitle'>\n\t\t\t\t<h3>\n\t\t\t\t\t<a href='#' id='"+t.contentid+"' onclick='system.change.read({contentid:this.id,yeslinked:false})'>"+t.title+`</a><br>\n\t\t\t\t\t<small class=wherethiscomefrom><a href='#' onclick=system.change.viewprofile({wid:'${t.userid}'})>@`+t.owner+`</a></small>\n\t\t\t\t</h3>\n\t\t\t</div>\n\t\t\t<div class='statusinfo'>\n\t\t\t\t<div style='margin:5px'>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<img src=more/db/img/icons/howmanyread.png></img>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<img src=more/db/img/icons/like.png></img>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<img src=more/db/img/icons/dislike.png></img>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<img src=more/db/img/icons/comment.png></img>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<img src=more/db/img/icons/share.png></img>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div><span>${fixcount(t.view,!0)}</span></div>\n\t\t\t\t\t\t<div><span>${fixcount(t.status.like.length,!0)}</span></div>\n\t\t\t\t\t\t<div><span>${fixcount(t.status.notlike.length,!0)}</span></div>\n\t\t\t\t\t\t<div><span>${t.comment.length}</span></div>\n\t\t\t\t\t\t<div><span>${t.share||0}</span></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`},makefullcontent=function(t,n){get(".content .shape");const e=createelement("div");e.classList.add("cols");const i=createelement("div");i.classList.add("colsin");for(let n=0;n<2;n++)i.innerHTML+="\n\t\t<div class='rect'>\n\t\t\t<div class='articleimage'>\n\t\t\t\t<img src='"+(o=t[n]).prevlink+"' onerror=imgerr(this)>\n\t\t\t</div>\n\t\t\t<div class='articletitle'>\n\t\t\t\t<h3>\n\t\t\t\t\t<a href='#' id='"+o.contentid+"' onclick='system.change.read({contentid:this.id,yeslinked:false})'>"+o.title+`</a><br>\n\t\t\t\t\t<small class=wherethiscomefrom><a href='#' onclick=system.change.viewprofile({wid:'${o.userid}'})>@`+o.owner+`</a></small>\n\t\t\t\t</h3>\n\t\t\t</div>\n\t\t\t<div class='statusinfo'>\n\t\t\t\t<div style='margin:5px'>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<img src=more/db/img/icons/howmanyread.png></img>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<img src=more/db/img/icons/like.png></img>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<img src=more/db/img/icons/dislike.png></img>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<img src=more/db/img/icons/comment.png></img>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<img src=more/db/img/icons/share.png></img>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div><span>${fixcount(o.view,!0)}</span></div>\n\t\t\t\t\t\t<div><span>${fixcount(o.status.like.length,!0)}</span></div>\n\t\t\t\t\t\t<div><span>${fixcount(o.status.notlike.length,!0)}</span></div>\n\t\t\t\t\t\t<div><span>${o.comment.length}</span></div>\n\t\t\t\t\t\t<div><span>${o.share||0}</span></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`;var o;return e.appendChild(i),e},removereplcomment=function(){get("#placeforrepl").innerHTML=""},replcomment=function(t){console.log(t);const n=createelement("div");n.innerHTML="<div><b>reply to:</b><span class=button style=float:right;padding:2px; onclick=removereplcomment();>remove</span></div>";const e=createelement("div");e.setAttribute("id","takethisforrepl"),e.innerHTML+=t.innerHTML,e.querySelector("#deletethisonerepl div").remove(),n.appendChild(e),n.querySelector("#replcomment").remove(),get("#placeforrepl").innerHTML=n.innerHTML,get("#thisiscomment").innerHTML=""},putcomment=function(t){const n=system.userdata.login?"":"none";return`\n\t<div style=margin-top:10px;padding:10px;display:inline-block; class=commentitem>\n\t\t<div style='float:left;width:100%;font-weight:bold;border-left:1px solid;'>\n\t\t\t<div style='margin:10px;margin-top:0;margin-bottom:0;float:left;'>\n\t\t\t\t<div style='margin-bottom:5px;float:left;width:100%;'><span><a onclick=system.change.viewprofile({wid:'${t.userid}'})>@`+t.username+"</a> - "+t.time+"</span></div>\n\t\t\t\t<div id=putcommentcontent style='float:left;margin-top:5px;width:100%;'><span style=background:lightgray; id='deletethisonerepl'>"+t.datacomment+`</span><span class=button style='margin-left:5px;padding:0;display:${n};' id=replcomment onclick=replcomment(this.parentNode.parentNode)>reply</span></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n`},fixcount=function(t,n){return n&&t>999?String(t)[0]+"k":t},objtostr=function(t){let n="";return Object.keys(t).forEach(function(e){const i=e+"="+t[e]+"&";n+=i}),n},getcontentid=function(){let t="content";for(let n=0;n<10;n++){t+=Math.floor(10*Math.random())}return t},getidfornewuser=function(){const t=["q","n","a","c","b","x","y","z"];let n=""+function(){let n="";for(let e=0;e<2;e++)n+=t[Math.floor(Math.random()*t.length)];return n}();for(let t=0;t<10;t++){n+=Math.floor(10*Math.random())}return n},deletethings=function(t){t&&t.forEach(function(t){t&&t.forEach(function(t){t&&t.remove()})})},checkisin=function(t,n){const e=typeof n;if("string"==e||"object"==e){for(let e=0;e<n.length;e++)if(e==n.length-1){if(n[e]==t)return!0}else if(n[e]==t)return!0}else console.log("error obj type is incorrect.");return!1},removethis=function(t,n){const e=[];return n.forEach(function(n){n!=t&&e.push(n)}),e},copymyid=function(t){navigator.clipboard.writeText(get("#regisid").value),alert("copied.")},scrollto=function(t){t&&t.scrollIntoView({behavior:"smooth"})},findthis=function(){const t=get("#findvalue").innerText||null;system.req({methode:"post",url:"more/php/donttouchthisfile.php",data:objtostr({validity:"true",mode:"findthis",key:t}),onload:function(t){const n=JSON.parse(t.target.responseText);deletethings([getall(".cols"),getall("#seeprofile"),getall("#loadbp"),getall(".loginmode"),getall(".writingmode"),getall("#placecontenthere"),getall(".readingsection"),getall("#zerodata")]),displayme(n,".shape"),system.userdata.find.resulted=!0}})},displayme=function(t,n){if(t.length>1){const e=.5*t.length;if(-1==String(e).indexOf(".")){const e=.5*t.length;system.content.display(t,e,2,!0,0,n)}else{const e=.5*(t.length-1),i=system.content.display(t,e,2,!0,0,n);system.content.display(t,1,1,!1,i,n)}}else{if(0==t.length)return null==get("#zerodata")&&(get(n).innerHTML+=zerodata),void system.userdologin.giveevent();system.content.display(t,1,1,!1,0,n)}},openthisimg=function(){const t=`\n\t\t<div id=profileimgviewer>\n\t\t\t<style>\n\t\t\t\t#profileimgviewer{\n\t\t\t\t\tposition:fixed;\n\t\t\t\t\tbackground:black;\n\t\t\t\t\twidth:100%;\n\t\t\t\t\ttop:0;\n\t\t\t\t\tleft:0;\n\t\t\t\t\theight:100%;\n\t\t\t\t}\n\t\t\t\t.transparent{\n\t\t\t\t\tbackground:white;\n\t\t\t\t\theight:10%;\n\t\t\t\t\toverflow:hidden;\n\t\t\t\t}\n\t\t\t\t#imgplace{\n\t\t\t\t\theight:80%;\n\t\t\t\t\tbackground:black;\n\t\t\t\t\toverflow-x:hidden;\n\t\t\t\t\toverflow-y:auto;\n\t\t\t\t}\n\t\t\t\t#closeparent{\n\t\t\t\t\tfloat:left;\n\t\t\t\t\twidth:100%;\n\t\t\t\t\theight:100%;\n\t\t\t\t}\n\t\t\t\t#closebutton{\n\t\t\t\t\tfloat:right;\n\t\t\t\t\tpadding:20px;\n\t\t\t\t\tbackground:blue;\n\t\t\t\t\tcolor:white;\n\t\t\t\t\tcursor:pointer;\n\t\t\t\t}\n\t\t\t\t#imgplace div{\n\t\t\t\t\tmargin:25%;\n\t\t\t\t}\n\t\t\t\t.imgc{\n\t\t\t\t\tmax-width:100%;\n\t\t\t\t\tmax-height:100%;\n\t\t\t\t}\n\t\t\t</style>\n\t\t\t<div class=transparent>\n\t\t\t\t<div id=closeparent>\n\t\t\t\t\t<div id=closebutton onclick=closeimgviewer()>close</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div id=imgplace>\n\t\t\t\t<div>\n\t\t\t\t\t<img src=${get("#thisisprofileimg").src} class=imgc>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=transparent></div>\n\t\t</div>\n\t`;get(".shape").innerHTML+=t},closeimgviewer=function(){get("#profileimgviewer").remove(),system.userdologin.giveevent(),loadcontentevent(system.userdata.profileloadnow.wid)},loadcontentevent=function(t){system.event({el:get(".button"),typeevent:"click",callback:function(){const n={methode:"post",url:"more/php/donttouchthisfile.php",data:objtostr({validity:"true",mode:"getcontentthisid",id:t}),onload:function(t){get("#placecontenthere").innerHTML="";const n=JSON.parse(t.target.responseText);var e;displayme(n,"#placecontenthere"),(e=getall(".cols")[getall(".cols").length-1])&&e.scrollIntoView({behavior:"smooth"})}};system.req(n)}})},logmeout=function(t){t&&location.reload()},profilechange=function(){if(!system.userdata.login)return;const t=`\n\t<div id=changeprofilehtml style=position:fixed;top:20%;background:lightgray;width:100%;left:0;text-align:center;>\n\t\t<style>\n\t\t\t#navcontrolthis{\n\t\t\t\tfloat:left;\n\t\t\t\tmargin-top:20px;\n\t\t\t\twidth:100%;\n\t\t\t\tmargin-bottom:20px;\n\t\t\t}\n\t\t\t#navcontrolthis span{\n\t\t\t\tmargin-right:10px;\n\t\t\t\tfont-size:20px;\n\t\t\t\tfont-weight:bold;\n\t\t\t\tbackground:white;\n\t\t\t\tcursor:pointer;\n\t\t\t}\n\t\t\t#instruction{\n\t\t\t\tfloat:left;\n\t\t\t\twidth:100%;\n\t\t\t\tmargin-bottom:20px;\n\t\t\t\tcolor:white;\n\t\t\t}\n\t\t\t#iframep{\n\t\t\t\tfloat:left;\n\t\t\t\twidth:100%;\n\t\t\t}\n\t\t\t#iframep iframe{\n\t\t\t\tborder:none;\n\t\t\t\tmax-height:50px;\n\t\t\t\tbackground:white;\n\t\t\t}\n\t\t</style>\n\t\t<h2>\n\t\t\t<span style=background:white;>choose an newprofile.</span>\n\t\t</h2>\n\t\t<div id=instruction>\n\t\t\tUpload ur img!\n\t\t</div>\n\t\t<div id=iframep>\n\t\t\t<iframe src=more/php/uploadprofilepic/index.php?wid=${system.userdata.profileloadnow.wid}></iframe>\n\t\t</div>\n\t\t<div id=navcontrolthis>\n\t\t\t<span onclick=savemynewprofile()>Save</span><span onclick=cancelchangeprofile()>cancel</span>\n\t\t</div>\n\t</div>\n`;get(".shape").innerHTML+=t},cancelchangeprofile=function(){get("#changeprofilehtml").remove(),loadcontentevent(system.userdata.profileloadnow.wid)},savemynewprofile=function(){const t="more/db/img/"+(localStorage.getItem("imgname")||"/icons/noimage.png"),n={methode:"post",url:"more/php/donttouchthisfile.php",data:objtostr({validity:"true",mode:"changeprofileofthiswid",wid:system.userdata.profileloadnow.wid,newdir:t}),onload:function(n){console.log(n.target.responseText),"bad"!==n.target.responseText&&(get("#thisisprofileimg").src=t,get("#changeprofilehtml").remove(),loadcontentevent(system.userdata.profileloadnow.wid))}};system.req(n)},imgerr=function(t){t.src="more/db/img/icons/noimage.webp"},checkuserinput=function(){setTimeout(function(){!function(){let t=get(".getthisdata").innerHTML;const n=createelement("div");n.innerHTML=t,get(".getthisdata").innerHTML=n.innerText}()},100)},closefindtab=function(t){t.parentNode.remove(),system.userdata.find.resulted||(system.userdata.onmode=system.userdata.find.before),system.userdata.find.resulted=!1},clearingdna=function(){deletethings([getall("script")])},sharethisone=function(t){const n=`\n\t\t<div id=sharethisone>\n\t\t\t<style>\n\t\t\t\t#sharethisone{\n\t\t\t\t\tposition:fixed;\n\t\t\t\t\tmargin:0;\n\t\t\t\t\tbackground:lightgray;\n\t\t\t\t\ttop:40%;\n\t\t\t\t\tleft:0;\n\t\t\t\t}\n\t\t\t</style>\n\t\t\tCopy this link!\n\t\t\t<input value=${t}>\n\t\t\t<button onclick=this.parentNode.remove();>close</button>\n\t\t</div>\n\t`,e=createelement("div");e.innerHTML=n,get(".readingsection").appendChild(e)};